# Sirene コントロールパネル

このアプリケーションは、リコーダー自動演奏装置「Sirene」を操作するためのものです。

## 目次
- [Sirene コントロールパネル](#sirene-コントロールパネル)
  - [目次](#目次)
  - [インストール](#インストール)
  - [起動](#起動)
  - [MIDIファイルを配置するディレクトリ](#midiファイルを配置するディレクトリ)

## インストール
必要なソフトウェアは以下の通りです：

- Python 3.8以降
  - poetry
- node 15.10.0以降

まず、リポジトリをクローンします。その際に、`--recursive`オプションを付けてください。
```sh
$ git clone --recursive https://github.com/frodo821/sirene-server sirene
$ cd sirene
```

つぎに、フロントエンドのビルドをします。
```sh
$ cd frontend
$ npm install
$ npm run build
$ cd ..
```

最後に、サーバーの依存ライブラリのインストールをします。
```sh
$ poetry install
```

これで準備は完了です。

## 起動
起動には`uvicorn`というASGIサーバーを利用します。
これは、先のインストールステップでインストールされるものです。

以下のコマンドで起動できます。
```sh
$ poetry run start
```

起動したのち、ブラウザで`http://localhost:8000`を開くとアプリを使うことができます。

## MIDIファイルを配置するディレクトリ

MIDIファイルは、このリポジトリをクローンしたディレクトリの直下にある`midis`ディレクトリの中に配置してください。
上記のインストールステップで最初にいたディレクトリが`C:\Users\frodo`だとすると、MIDIファイルを配置するディレクトリは`C:\Users\frodo\sirene\midis`になります。

このディレクトリは、リポジトリをクローンした段階で作られるため、新しく作る必要はありません。
また、最初から`midis`の中に入っている`.gitkeep`という名前の空ファイルを削除する必要はありません。
